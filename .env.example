# ---------------------------
# Modbus TCP Verbindung
# ---------------------------
VENUS_IP=192.168.41.101
VENUS_PORT=502
MODBUS_TIMEOUT_S=2

# ---------------------------
# Read Unit / Enable + Messwerte
# ---------------------------
READ_UNIT_ID=100
REG_ENABLE=806
REG_SOC=843

# Last: 3 Register (base..base+2), Summe in Watt
REG_LOAD_BASE=817

# PV Register (Summe)
PV_REGS=811,812,813

# ---------------------------
# MultiPlus Mode (VE.Bus)
# ---------------------------
MODE_UNIT_ID=227
REG_MODE=33

# Mode Werte (Victron Ã¼blich)
# ChargerOnly=1, On=3, Off=4
MODE_CHARGER_ONLY=1
MODE_ON=3
MODE_OFF=4

# ---------------------------
# ESS Mode (Hub4Mode)
# ---------------------------
ESS_UNIT_ID=100
REG_ESS_MODE=2902

# Tag/Nacht Zielwerte (typisch: ESS1=1, ESS2=2)
ESS_DAY_VALUE=1
ESS_NIGHT_VALUE=2

# WICHTIG:
# 0 = niemals nachts ESS1->ESS2 umschalten (Default, sinnvoll 1-phasig)
# 1 = nachts darf auf ESS2 geschaltet werden (sinnvoll 3-phasig)
ESS_ALLOW_NIGHT_SWITCH=0

# ---------------------------
# Logik / Schwellwerte
# ---------------------------
SOC_MIN=15
SOC_CHARGE_MIN=20

PV_SURPLUS_W=100
PV_SURPLUS_CONFIRM_S=60

# Nachterkennung (Integrator)
PV_NIGHT_W=200
NIGHT_CONFIRM_S=1800
NIGHT_DECAY_FACTOR=0.25

# Nachtregel: wenn SOC < SOC_CHARGE_MIN und Nacht -> OFF bleiben
TURN_OFF_AT_NIGHT_WHEN_BELOW_CHARGE_MIN=1

# Abschalt-Sequenz
OFF_DELAY_SECONDS=30

# Loop / Schutz
POLL_INTERVAL_S=5.0
MIN_WRITE_GAP_S=5.0
MIN_ESS_WRITE_GAP_S=30.0

# Skalierung / Adress-Offset
SOC_DIVISOR=1
ADDR_OFFSET=0

# Testmodus: 1 = keine Writes
DRY_RUN=0
